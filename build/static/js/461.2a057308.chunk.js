"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[461],{5212:function(e,n,i){var l=i(1413),t=i(5987),a=i(2791),r=i(2007),d=i.n(r),c=i(6907),s=i(184),o=["children","title","meta"],u=(0,a.forwardRef)((function(e,n){var i=e.children,a=e.title,r=void 0===a?"":a,d=e.meta,u=(0,t.Z)(e,o);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.ql,{children:[(0,s.jsx)("title",{children:"".concat(r," | fanticket")}),d]}),(0,s.jsx)("div",(0,l.Z)((0,l.Z)({ref:n},u),{},{children:i}))]})}));u.propTypes={children:d().node.isRequired,title:d().string,meta:d().node},n.Z=u},2821:function(e,n,i){i.d(n,{Z:function(){return c},i:function(){return s}});var l,t=i(168),a=i(7691),r=i(184),d=a.default.div(l||(l=(0,t.Z)(["\n    border-radius: 16px;\n    width: 100%;\n    cursor: pointer;\n    border: 1px;\n    border-style: solid;\n    border-color: transparent;\n\n    display: inline-flex;\n    justify-content: space-between;\n    position: relative;\n    background: linear-gradient(#1c1c1c, #1c1c1c) padding-box, linear-gradient(to bottom, #828282, #323232) border-box;\n"])));function c(e){return(0,r.jsx)(d,{className:null===e||void 0===e?void 0:e.className,children:(0,r.jsx)("div",{className:"w-full ".concat((null===e||void 0===e?void 0:e.isMessage)&&"bg-primary/30"," rounded-xl ").concat((null===e||void 0===e?void 0:e.hoverEvent)&&"hover:bg-primary/20"," "),onClick:null===e||void 0===e?void 0:e.onClick,children:e.children})})}var s=function(e){var n=e.cls,i=void 0===n?"":n;return(0,r.jsx)("div",{className:"divider overflow-hidden ".concat(i),style:{height:1}})}},9242:function(e,n,i){i.d(n,{Z:function(){return c}});var l,t=i(168),a=i(7691),r=i(184),d=a.default.div(l||(l=(0,t.Z)(["\n    display: flex;\n    align-items: flex-end;\n    justify-content: center;\n    position: relative;\n    &:before {\n        content: '';\n        background-image: linear-gradient(0deg, #1c1c1c 24.45%, rgba(28, 28, 28, 0) 84.89%),\n            ",";\n\n        z-index: -1;\n        position: absolute;\n        background-size: cover;\n        background-repeat: no-repeat;\n        -webkit-filter: grayscale(100%) blur(17.5px);\n        filter: grayscale(100%) blur(17.5px);\n        background-position: center;\n        width: 100%;\n        height: 100%;\n    }\n"])),(function(e){return e.cover||'url("/images/background/main-banner-bg.jpg")'}));function c(e){return(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(d,{className:"pt-40",children:e.children})})}},1461:function(e,n,i){i.r(n),i.d(n,{default:function(){return C}});var l=i(9439),t=i(2791),a=i(7689),r=i(2711),d=i(3197),c=i(1539),s=i(9615),o=i(2654),u=i(5985),v=i(7087),f=i(7870),h=i(7834),m=i(848),x=i(2821),p=i(184);function j(e){var n=e.channels,i=e.isReceiver,a=e.openChat,r=(0,t.useState)(),c=(0,l.Z)(r,2),s=c[0],o=c[1],u=(0,h.Z)().user,j=(0,t.useState)([]),b=(0,l.Z)(j,2),g=b[0],N=b[1],y=(0,m.Z)().received;function Z(e){return e.filter((function(e){return!e.readed&&e.sender!==(null===u||void 0===u?void 0:u._id)})).length}return(0,t.useEffect)((function(){y&&y.command&&(y.command===d.LY.ONLINE_USERS&&N(null===y||void 0===y?void 0:y.users))}),[y]),(0,p.jsx)(x.Z,{children:(0,p.jsx)("div",{className:"w-full p-2 flex flex-col gap-1",children:null===n||void 0===n?void 0:n.map((function(e,n){var l,t,r,c,u;return(0,p.jsxs)("div",{className:"flex flex-col w-full cursor-pointer",onClick:function(){return function(e){o(e),a(e)}(e)},children:[(0,p.jsxs)("div",{className:"flex justify-between p-2 rounded-md ".concat(e===s?"bg-secondary/50":""),children:[(0,p.jsxs)("div",{className:"flex gap-1",children:[(0,p.jsx)("div",{className:"avatar h-12 w-12 flex-1 aspect-square",children:(0,p.jsx)(v.LazyLoadImage,{src:"".concat(d.E0).concat(null===e||void 0===e||null===(l=e.user)||void 0===l?void 0:l.avatar),alt:"",effect:"blur",className:"aspect-square rounded-full"})}),(0,p.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,p.jsx)("span",{className:"text-lg capitalize",children:null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.fullName}),(0,p.jsx)("span",{className:"text-success",id:"online-".concat(null===e||void 0===e||null===(r=e.user)||void 0===r?void 0:r._id),children:null!==g&&void 0!==g&&g.includes(null===e||void 0===e||null===(c=e.user)||void 0===c?void 0:c._id)?"online":" "})]})]}),(0,p.jsxs)("div",{className:"flex flex-col gap-1 justify-between",children:[i&&(0,p.jsxs)("span",{className:"text-primary",children:["R$ ",(0,f.FK)(null===e||void 0===e?void 0:e.buyerPrice)]}),(0,p.jsx)("span",{className:"badge badge-primary ".concat(Z(null===e||void 0===e?void 0:e.chats)<=0?"hidden":""),id:"count-".concat(null===e||void 0===e||null===(u=e.user)||void 0===u?void 0:u._id),children:(0,f.FK)(Z(null===e||void 0===e?void 0:e.chats))})]})]}),(0,p.jsx)("div",{className:"divider -my-2  mx-1"})]},n)}))})})}var b=i(3433),g=i(9953);function N(e){var n=e.onTransferMessage,i=e.selectedChannel,a=e.isReceiver,c=void 0!==a&&a,u=(0,t.useState)(1),j=(0,l.Z)(u,2),N=j[0],y=j[1],Z=(0,t.useState)(""),w=(0,l.Z)(Z,2),k=w[0],C=w[1],E=(0,t.useRef)(null),M=(0,t.useState)(null===i||void 0===i?void 0:i.chats),_=(0,l.Z)(M,2),S=_[0],D=_[1],R=(0,h.Z)().user,I=(0,m.Z)(),L=I.received,T=I.send,U=(0,t.useCallback)((function(){var e={channelId:null===i||void 0===i?void 0:i._id,receiver:c?null===i||void 0===i?void 0:i.sender:null===i||void 0===i?void 0:i.receiver,content:k};s.Z.post(d.U7.saveMessage,e).then((function(i){200===i.status&&(n(k),D([].concat((0,b.Z)(S),[i.data.data])),T({command:d.LY.USER_CHAT,content:e}),C(""),y(1))}))}),[i,k]);return(0,t.useEffect)((function(){i&&D(null===i||void 0===i?void 0:i.chats)}),[i]),(0,t.useEffect)((function(){if(L&&null!==L&&void 0!==L&&L.command){var e=L.command,n=L.content,l=L.sender;if(e===d.LY.USER_CHAT&&n.receiver&&(null===n||void 0===n?void 0:n.receiver)===(null===R||void 0===R?void 0:R._id)){var t=null===n||void 0===n?void 0:n.content;if((null===n||void 0===n?void 0:n.channelId)===(null===i||void 0===i?void 0:i._id)){var a={created:new Date(Date.now()),content:t,receiver:null===R||void 0===R?void 0:R._id,readed:!1};D([].concat((0,b.Z)(S),[a]))}else{var r=document.querySelector("#count-".concat(l));if(r){var c=(null===r||void 0===r?void 0:r.textContent)||0;r.classList.remove("hidden"),r.textContent=(0,f.FK)(parseInt(c)+1)}}}else if(e===d.LY.READ_MESSAGE){var s=null===S||void 0===S?void 0:S.map((function(e){return e.sender===(null===R||void 0===R?void 0:R._id)&&(e.readed=!0),e}));D(s)}}}),[L]),(0,t.useEffect)((function(){var e;E.current&&null!==S&&void 0!==S&&S.length&&(null===S||void 0===S?void 0:S.length)>8&&(null===(e=E.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))}),[S]),(0,p.jsx)("div",{className:"flex-1",children:(0,p.jsx)(x.Z,{children:(0,p.jsxs)("div",{className:"flex flex-col gap-1 p-1",children:[(0,p.jsx)(g.Z,{id:"simpleBar",className:"max-h-[80vh] min-h-[80vh]",children:(0,p.jsxs)("div",{className:"w-full p-2",children:[null===S||void 0===S?void 0:S.map((function(e,n){var l,t=(null===R||void 0===R?void 0:R._id)===(null===e||void 0===e?void 0:e.sender),a="".concat(d.E0).concat(t?null===R||void 0===R?void 0:R.avatar:null===i||void 0===i||null===(l=i.user)||void 0===l?void 0:l.avatar);return(0,p.jsxs)("div",{className:"chat ".concat(t?"chat-end":"chat-start"),children:[(0,p.jsx)("div",{className:"chat-image avatar",children:(0,p.jsx)("div",{className:"w-10 rounded-full",children:(0,p.jsx)(v.LazyLoadImage,{src:a,alt:""})})}),(0,p.jsx)("div",{className:"chat-header",children:(0,p.jsx)("time",{className:"text-xs opacity-50",children:(0,o.DY)(null===e||void 0===e?void 0:e.created)})}),(0,p.jsxs)("p",{className:"chat-bubble",children:[null===e||void 0===e?void 0:e.content,(0,p.jsx)("span",{className:"text-xs flex ".concat(t?"justify-end":"justify-start"),children:(0,p.jsx)(r.JO,{icon:null!==e&&void 0!==e&&e.readed?"mdi:check-all":"cil:check-alt"})})]})]},n)})),(0,p.jsx)("div",{ref:E,className:"w-full h-4"})]})}),(0,p.jsxs)("div",{className:"flex gap-1 flex-col md:flex-row",children:[(0,p.jsx)("textarea",{className:"flex-1 textarea textarea-bordered",rows:N,onFocus:function(){S.filter((function(e){return e.receiver===(null===R||void 0===R?void 0:R._id)&&!1===e.readed})).length&&s.Z.post(d.U7.readedMessage,{channelId:null===i||void 0===i?void 0:i._id,receiver:c?null===i||void 0===i?void 0:i.sender:null===i||void 0===i?void 0:i.receiver}).then((function(e){if(200===e.status){var n=null===S||void 0===S?void 0:S.map((function(e){return e.receiver===(null===R||void 0===R?void 0:R._id)&&(e.readed=!0),e}));D(n)}}))},onChange:function(e){var n=e.target.value;y(null===n||void 0===n?void 0:n.split("\n").length),C(n)},value:k}),(0,p.jsx)("button",{className:"btn btn-primary",onClick:U,disabled:!i||null===i,children:"SD"})]})]})})})}var y=i(7364);function Z(e){var n=e.channels,i=e.isReceiver,l=e.openChat,t=e.onClose,a=(0,c.Z)().t;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("input",{type:"checkbox",id:"user-list-modal",className:"modal-toggle"}),(0,p.jsx)("div",{className:"modal",children:(0,p.jsxs)(y.j,{className:"modal-box backdrop-blur-lg",children:[(0,p.jsxs)("div",{className:"mb-2",children:[(0,p.jsx)("label",{htmlFor:"user-list-modal",className:"btn btn-sm btn-circle absolute right-2 top-5 bg-transparent border-0",children:"\u2715"}),(0,p.jsx)("h3",{className:"font-bold text-lg",children:a("title.modal.select_user")})]}),(0,p.jsx)("hr",{className:"-mx-5 border-stone-500 mb-4"}),(0,p.jsx)("div",{className:"flex flex-col gap-4 p-2 mb-4",children:(0,p.jsx)(j,{channels:n,openChat:l,isReceiver:i})}),(0,p.jsx)("div",{className:"flex justify-end gap-2 p-2",children:(0,p.jsx)("button",{className:"btn btn-primary px-8 capitalize btn-outline",onClick:t,children:a("action.confirm")})})]})})]})}var w=i(5212),k=i(9242);function C(){var e=(0,c.Z)().t,n=(0,h.Z)().user,i=(0,a.UO)(),v=i.ticketId,f=i.isReceived,m=(0,t.useState)([]),b=(0,l.Z)(m,2),g=b[0],y=b[1],C=(0,t.useState)(),E=(0,l.Z)(C,2),M=E[0],_=E[1],S=(0,t.useState)(),D=(0,l.Z)(S,2),R=D[0],I=D[1],L=function(e){s.Z.post(d.U7.oneChannelData,{channelId:null===e||void 0===e?void 0:e._id,received:"received"===f}).then((function(e){var n,i;200===e.status&&((null===(n=e.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.length)>0&&I(e.data.data[0]))}))};(0,t.useEffect)((function(){v&&s.Z.post(d.U7.channelData,{ticketId:v,received:"received"===f}).then((function(e){if(200===e.status){var n=e.data.data;y(n),_(n[0])}}))}),[v]);var T=function(){var e=document.querySelector("#user-list-modal");e&&e.click()};return(0,p.jsxs)(w.Z,{title:"Conversation Yard",children:[(0,p.jsx)(k.Z,{children:(0,p.jsx)("div",{className:"container p-4",children:(0,p.jsx)("div",{className:"flex flex-col gap-4 mb-8",children:(0,p.jsx)("h3",{className:"text-4xl text-primary",children:e("title.select_ticket")})})})}),(0,p.jsx)("div",{className:"container p-4 mb-8",children:(0,p.jsxs)(x.Z,{children:[(0,p.jsxs)("div",{className:"w-full p-2 gap-2 flex",children:[(0,p.jsx)("div",{className:"p-2 md:hidden",children:(0,p.jsx)("button",{className:"btn btn-secondary btn-circle btn-sm",onClick:T,children:(0,p.jsx)(r.JO,{icon:"ic:round-menu"})})}),(0,p.jsxs)("div",{className:"w-full p-2 gap-2 flex-1 flex flex-col md:flex-row md:items-center",children:[(0,p.jsx)("h4",{className:"text-primary font-2xl",children:null===M||void 0===M?void 0:M.eventName}),(0,p.jsxs)("h6",{children:[null===M||void 0===M?void 0:M.eventType," - ",null===M||void 0===M?void 0:M.count," ",e("title.tickets")]}),(0,p.jsx)("h6",{className:"text-sm text-stone-400",children:(0,o.UX)(null===M||void 0===M?void 0:M.eventDate)})]}),R&&!(null!==R&&void 0!==R&&R.dispute)&&(null===R||void 0===R?void 0:R.receiver)===(null===n||void 0===n?void 0:n._id)&&(0,p.jsxs)("button",{className:"btn btn-primary btn-sm capitalize",onClick:function(){s.Z.post(d.vp.approvePriceTicket,{channelId:null===R||void 0===R?void 0:R._id}).then((function(e){var n=e.status,i=e.data;200===n&&u.Am.success(null===i||void 0===i?void 0:i.message)}))},children:[e("action.approve")," R$ ",R.buyerPrice]})]}),(0,p.jsxs)("div",{className:"w-full p-2 flex gap-1",children:[(0,p.jsx)("div",{className:"w-[250px] hidden md:block",children:(0,p.jsx)(j,{channels:g,openChat:L,isReceiver:"received"===f})}),(0,p.jsx)(N,{onTransferMessage:function(){},selectedChannel:R,isReceiver:"received"===f})]})]})}),(0,p.jsx)(Z,{channels:g,openChat:L,isReceiver:"received"===f,onClose:T})]})}},7870:function(e,n,i){i.d(n,{FK:function(){return r},e_:function(){return a},v1:function(){return d}});var l=i(6098),t=i.n(l);function a(e){return t()(e).format(Number.isInteger(e)?"$0,0":"$0,0.00")}function r(e){return t()(e).format()}function d(e){return t()(e).format("0.00a").replace(".00","")}},2654:function(e,n,i){i.d(n,{DY:function(){return c},UX:function(){return s},gC:function(){return r},uW:function(){return a},xD:function(){return o},zM:function(){return d}});var l=i(9158),t=i(5939);function a(e){return e.containsTime?d(e.dateTime):r(e.dateTime)}function r(e){return(0,l.Z)(new Date(e),"dd MMM yyyy")}function d(e){return(0,l.Z)(new Date(e),"dd MMM yyyy HH:mm")}function c(e){try{return(0,t.Z)(new Date(e),{addSuffix:!0})}catch(n){return"Invaild Date"}}function s(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{return n?(0,l.Z)(new Date(e),"EEEE dd, MMMM, yyyy p"):(0,l.Z)(new Date(e),"EEEE dd, MMMM, yyyy")}catch(i){return"".concat(e)}}function o(e){try{return(0,l.Z)(new Date(e),"MMM, dd EEE")}catch(n){return"".concat(e)}}}}]);
//# sourceMappingURL=461.2a057308.chunk.js.map